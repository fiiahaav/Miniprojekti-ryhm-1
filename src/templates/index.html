<!DOCTYPE html>
<html>
<head>
    <title>L√§hde Kirjasto</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>L√§hde Kirjasto</h1>

    <h2>Kaikki l√§hteet (ole hyv√§) ‡ºº „Å§ ‚óï_‚óï ‡ºΩ„Å§ üìöüìñ</h2>

    <form method="POST" action="{{ url_for('add_source') }}">
        <select name="lahde" id="lahde">
            <option value="article">Artikkeli</option>
            <option value="book">Kirja</option>
            <option value="inproceedings">Inproceedings</option>
            <option value="misc">Misc</option>
        </select>
        <button type="submit" id="submit-btn">Lis√§√§ l√§hde</button>
    </form>
    <div class="flex-container">

        <div class="column art-col">
            <h3>Artikkelit:</h3>
            {% for art in articles %}
                <div class="source-entry">
                    <strong>{{ art['title'] }}</strong><br>
                    {{ art['author'] }}, {% if art['month'] %}{{ art['month'] }}.{% endif %}{{ art['year'] }}<br>
                    {{ art['journal'] }}<br>
                    {% if art['volume'] %}
                        {{ art['volume'] }}<br>
                    {% endif %}
                    {% if art['number'] %}
                        {{ art['number'] }}<br>
                    {% endif %}
                    {% if art['pages'] %}
                        {{ art['pages'] }}<br>
                    {% endif %}
                    {% if art['notes'] %}
                        {{ art['notes'] }}<br>
                    {% endif %}
                    <br>
                    <a href="{{ url_for('edit_article', id=art.id) }}" class="edit-link">Muokkaa</a>
                    <a href="{{ url_for('download_bibtex_article', id=art.id) }}" class="download-link">Lataa BibTeX</a>
                    <form action="{{ url_for('delete_article', id=art.id) }}" method="POST" class="delete-form">
                        <button type="submit" class="delete-btn" onclick="return confirm('Haluatko varmasti poistaa t√§m√§n artikkelin?')">Poista</button>
                    </form>
                </div>
            {% endfor %}
        </div>

        <div class="column book-col">
            <h3>Kirjat:</h3>
            {% for book in books %}
                <div class="source-entry">
                    <strong>{{ book['title'] }}</strong><br>
                    {{ book['author'] }}, {% if book['month'] %}{{ book['month'] }}.{% endif %}{{ book['year'] }}<br>
                    {{ book['editor'] }}, {{ book['publisher'] }}<br>
                    {% if book['volume'] %}
                        {{ book['volume'] }}<br>
                    {% endif %}
                    {% if book['number'] %}
                        {{ book['number'] }}<br>
                    {% endif %}
                    {% if book['pages'] %}
                        {{ book['pages'] }}<br>
                    {% endif %}
                    {% if book['notes'] %}
                        {{ book['notes'] }}<br>
                    {% endif %}
                    <br>
                    <a href="{{ url_for('edit_book', id=book.id) }}" class="edit-link">Muokkaa</a>
                    <a href="{{ url_for('download_bibtex_book', id=book.id) }}" class="download-link">Lataa BibTeX</a>
                    <form action="{{ url_for('delete_book', id=book.id) }}" method="POST" class="delete-form">
                        <button type="submit" class="delete-btn" onclick="return confirm('Haluatko varmasti poistaa t√§m√§n kirjan?')">Poista</button>
                    </form>
                </div>
            {% endfor %}
        </div>

        <div class="column inproc-col">
            <h3>Inproceedings:</h3>
            {% for inproc in inproceedings %}
                <div class="source-entry">
                    <strong>{{ inproc['title'] }}</strong><br>
                    {{ inproc['author'] }}{% if inproc['year'] %}, {{ inproc['month'] }}.{{ inproc['year'] }}{% endif %}<br>
                    {% if inproc['booktitle'] %}
                        {{ inproc['booktitle'] }}<br>
                    {% endif %}
                    {% if inproc['editor'] %}
                        {{ inproc['editor'] }}<br>
                    {% endif %}
                    {% if inproc['publisher'] %}
                        {{ inproc['publisher'] }}<br>
                    {% endif %}
                    {% if inproc['volume'] %}
                        {{ inproc['volume'] }}<br>
                    {% endif %}
                    {% if inproc['number'] %}
                        {{ inproc['number'] }}<br>
                    {% endif %}
                    {% if inproc['series'] %}
                        {{ inproc['series'] }}<br>
                    {% endif %}
                    {% if inproc['pages'] %}
                        {{ inproc['pages'] }}<br>
                    {% endif %}
                    {% if inproc['address'] %}
                        {{ inproc['address'] }}<br>
                    {% endif %}
                    {% if inproc['organization'] %}
                        {{ inproc['organization'] }}<br>
                    {% endif %}
                    {% if inproc['notes'] %}
                        {{ inproc['notes'] }}<br>
                    {% endif %}
                    <br>
                    <a href="{{ url_for('edit_inproceedings', id=inproc.id) }}" class="edit-link">Muokkaa</a>
                    <a href="{{ url_for('download_bibtex_inproceedings', id=inproc.id) }}" class="download-link">Lataa BibTeX</a>
                    <form action="{{ url_for('delete_inproceedings', id=inproc.id) }}" method="POST" class="delete-form">
                        <button type="submit" class="delete-btn" onclick="return confirm('Haluatko varmasti poistaa t√§m√§n inproceedings-l√§hteen?')">Poista</button>
                    </form>
                </div>
            {% endfor %}
        </div>

        <div class="column misc-col">
            <h3>Misc:</h3>
            {% for misc in miscs %}
                <div class="source-entry">
                    <strong>{{ misc['title'] }}</strong><br>
                    {{ misc['author'] }}, {% if misc['month'] %}{{ misc['month'] }}.{% endif %}{{ misc['year'] }}<br>
                    {% if misc['url'] %}
                        <a href="{{ misc['url'] }}">{{ misc['url'] }}</a><br>
                    {% endif %}
                    {% if misc['notes'] %}
                        {{ misc['notes'] }}<br>
                    {% endif %}
                    <br>
                    <a href="{{ url_for('edit_misc', id=misc.id) }}" class="edit-link">Muokkaa</a>
                    <a href="{{ url_for('download_bibtex_misc', id=misc.id) }}" class="download-link">Lataa BibTeX</a>
                    <form action="{{ url_for('delete_misc', id=misc.id) }}" method="POST" class="delete-form">
                        <button type="submit" class="delete-btn" onclick="return confirm('Haluatko varmasti poistaa t√§m√§n misc-l√§hteen?')">Poista</button>
                    </form>
                </div>
            {% endfor %}
        </div>

    </div> 
      <form action="{{ url_for('get_references_page') }}" method="GET">
        <button type="submit" >Hae viitteit√§</button>
    </form>
    
</body>
</html>